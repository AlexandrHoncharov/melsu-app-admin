<!-- app/templates/teacher/departments.html -->
{% extends "base.html" %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-6">
        <h1 class="h3 mb-0">Кафедры</h1>
        <p class="text-muted">Управление списком кафедр</p>
    </div>
    <div class="col-md-6 text-right">
        <a href="{{ url_for('teacher.add_department') }}" class="btn btn-primary">
            <i class="fas fa-plus-circle"></i> Добавить кафедру
        </a>
    </div>
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Список кафедр</h6>
            </div>
            <div class="card-body">
                {% if departments %}
                <div class="table-responsive">
                    <table class="table table-bordered" id="departmentsTable" width="100%" cellspacing="0">
                        <thead>
                            <tr>
                                <th>Название</th>
                                <th>Описание</th>
                                <th>Преподаватели</th>
                                <th>Дата создания</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for department in departments %}
                            <tr>
                                <td>{{ department.name }}</td>
                                <td>{{ department.description or '-' }}</td>
                                <td>{{ department.teachers|length }}</td>
                                <td>{{ department.created_at.strftime('%d.%m.%Y') }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <div class="text-center py-4">
                    <p class="lead text-muted">Список кафедр пуст</p>
                    <a href="{{ url_for('teacher.add_department') }}" class="btn btn-primary">
                        <i class="fas fa-plus-circle"></i> Добавить кафедру
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    $(document).ready(function() {
        $('#departmentsTable').DataTable({
            language: {
                url: '//cdn.datatables.net/plug-ins/1.10.24/i18n/Russian.json'
            },
            "order": [[ 0, "asc" ]]
        });
    });
</script>
{% endblock %}